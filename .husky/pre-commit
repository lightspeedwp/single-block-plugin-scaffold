#!/usr/bin/env sh

# Pre-commit hook for {{slug}} plugin
# This hook runs before each commit to ensure code quality

. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks for {{projectName}}..."

# Run JavaScript linting
echo "ğŸŸ¡ Linting JavaScript..."
npm run lint:js || {
    echo "âŒ JavaScript linting failed. Please fix the issues and try again."
    exit 1
}

# Run CSS linting
echo "ğŸŸ¡ Linting CSS..."
npm run lint:css || {
    echo "âŒ CSS linting failed. Please fix the issues and try again."
    exit 1
}

# Run PHP linting (if composer is available)
if command -v composer &> /dev/null; then
    echo "ğŸŸ¡ Linting PHP..."
    composer run lint || {
        echo "âŒ PHP linting failed. Please fix the issues and try again."
        exit 1
    }
else
    echo "âš ï¸  Skipping PHP linting (Composer not available)"
fi

# Run package.json validation
echo "ğŸŸ¡ Validating package.json..."
npm run lint:pkg-json || {
    echo "âŒ package.json validation failed. Please fix the issues and try again."
    exit 1
}

echo "âœ… All pre-commit checks passed!"