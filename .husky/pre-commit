#!/usr/bin/env sh

# Pre-commit hook for {{slug}} plugin
# This hook runs before each commit to ensure code quality

. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks for {{projectName}}..."

# Run JavaScript linting
echo "🟡 Linting JavaScript..."
npm run lint:js || {
    echo "❌ JavaScript linting failed. Please fix the issues and try again."
    exit 1
}

# Run CSS linting
echo "🟡 Linting CSS..."
npm run lint:css || {
    echo "❌ CSS linting failed. Please fix the issues and try again."
    exit 1
}

# Run PHP linting (if composer is available)
if command -v composer &> /dev/null; then
    echo "🟡 Linting PHP..."
    composer run lint || {
        echo "❌ PHP linting failed. Please fix the issues and try again."
        exit 1
    }
else
    echo "⚠️  Skipping PHP linting (Composer not available)"
fi

# Run package.json validation
echo "🟡 Validating package.json..."
npm run lint:pkg-json || {
    echo "❌ package.json validation failed. Please fix the issues and try again."
    exit 1
}

echo "✅ All pre-commit checks passed!"